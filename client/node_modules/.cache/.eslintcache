[{"/Users/tuphan/Desktop/gcallstest/client/src/index.js":"1","/Users/tuphan/Desktop/gcallstest/client/src/reportWebVitals.js":"2","/Users/tuphan/Desktop/gcallstest/client/src/App.js":"3","/Users/tuphan/Desktop/ubuntuGcalls/client/src/index.js":"4","/Users/tuphan/Desktop/ubuntuGcalls/client/src/reportWebVitals.js":"5","/Users/tuphan/Desktop/ubuntuGcalls/client/src/App.js":"6"},{"size":500,"mtime":1623762415497,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1623762415498,"results":"9","hashOfConfig":"8"},{"size":12286,"mtime":1623768105991,"results":"10","hashOfConfig":"8"},{"size":500,"mtime":1623762415497,"results":"11","hashOfConfig":"12"},{"size":362,"mtime":1623762415498,"results":"13","hashOfConfig":"12"},{"size":12600,"mtime":1623927627347,"results":"14","hashOfConfig":"12"},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"17"},"gl8m4x",{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"17"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},"p2zws2",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/tuphan/Desktop/gcallstest/client/src/index.js",[],["30","31"],"/Users/tuphan/Desktop/gcallstest/client/src/reportWebVitals.js",[],"/Users/tuphan/Desktop/gcallstest/client/src/App.js",["32","33","34"],"import \"./App.css\";\nimport deleteIcon from \"./image/delete.png\";\nimport callIcon from \"./image/call.png\";\nimport endIcon from \"./image/end.png\";\nimport muteIcon from \"./image/mute.png\";\nimport audioIcon from \"./image/audio.png\";\nimport React, { useState, useEffect, Component } from \"react\";\nimport JsSIP from \"jssip\";\nrequire('dotenv').config()\n\nJsSIP.debug.disable(\"JsSIP:*\");\nvar socket\nvar configuration\nvar ua\n\nfetch(`/api/key`).then(response => response.json()).then(state =>{\n  socket = new JsSIP.WebSocketInterface(state.ws);\n  configuration = {\n    sockets: [socket],\n    uri: state.uri,\n    password: state.password,\n    session_timers: false,\n  };\n  \n\n  ua = new JsSIP.UA(configuration);\n  ua.start();\n});\n\nvar pos;\nlet duration = 0;\nvar timer;\nlet address = \"Unknown\";\nlet internetProtocol  = \"Unknown\";\nconst ipUrl =\"https://api.ipify.org?format=json\";\n\n \n  fetch(ipUrl)\n    .then((response) => response.json())\n    .then((jsonData) => {\n      // jsonData is parsed json object received from url\n      \n      internetProtocol = jsonData.ip\n\n    })\n    .catch((error) => {\n      // handle your errors here\n      console.error(error);\n    });\nnavigator.geolocation.getCurrentPosition(function (position) {\n  pos = {\n    lng: position.coords.longitude,\n    lat: position.coords.latitude,\n  };\n \n  const url =\n    \"https://api.mapbox.com/geocoding/v5/mapbox.places/\" +\n    pos.lng +\n    \",\" +\n    pos.lat +\n    \".json?access_token=pk.eyJ1IjoidHVzcGhhbmFuaCIsImEiOiJja244eDFyMGkwM3R5MnVvbzI1eWZsYzNuIn0.jm4MGKDtKDMBpLz8IUXyAA\";\n\n  fetch(url)\n    .then((response) => response.json())\n    .then((jsonData) => {\n      // jsonData is parsed json object received from url\n      address = jsonData.features[0].place_name;\n    })\n    .catch((error) => {\n      // handle your errors here\n      console.error(error);\n    });\n\n});\n\n\n// Register callbacks to desired call events\nvar eventHandlers = {\n  progress: function (e) {\n    console.log(\"call is in progress\");\n    showCallingContainer();\n    setStatusText(\"Ringing\");\n   \n  },\n  failed: function (e) {\n    console.log(\"call failed with cause \");\n    setCallButton();\n    setStatusText(\"Call Fail\");\n    if (timer) {\n      clearInterval(timer);\n      duration = 0;\n    }\n    audio = null\n    session = null\n  },\n  ended: function (e) {\n    console.log(\"call ended with cause \");\n    setCallButton();\n    setStatusText(\"Call End\");\n    if (timer) {\n      clearInterval(timer);\n      duration = 0;\n    }\n    audio = null\n    session = null\n  },\n  confirmed: function (e) {\n    console.log(\"call confirmed\");\n    timer = setInterval(() => {\n    \n      setStatusText(fomatDuration(duration));\n      duration++;\n    }, 1000);\n  },\n};\n\n\nvar options = {\n  eventHandlers: eventHandlers,\n  mediaConstraints: { audio: true, video: false },\n};\nvar session;\nvar audio;\nfunction startCallAudio(phoneNumber) {\n  session = ua.call(phoneNumber, options);\n  if (session) {\n    session.connection.addEventListener(\"addstream\", (e) => {\n      audio = document.createElement(\"audio\");\n      audio.srcObject = e.stream;\n      audio.play();\n    });\n  }\n}\n\n\nfunction fomatDuration(time) {\n  // Hours, minutes and seconds\n\n  var secs = ~~time % 60;\n  var mins = ~~(time / 60);\n  // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\n  var ret = \"\";\n\n  if (mins > 9) {\n    ret += \"\" + mins + \":\" + (secs < 10 ? \"0\" : \"\");\n  } else {\n    ret += \"0\" + mins + \":\" + (secs < 10 ? \"0\" : \"\");\n  }\n\n  ret += \"\" + secs;\n  return ret;\n}\n\nfunction setStatusText(status) {\n  const statusText = document.getElementById(\"status-text\");\n  statusText.innerHTML = status;\n}\n\nfunction setCallButton() {\n  const callButton = document.getElementById(\"call-button\");\n  const bol = callButton.getAttribute(\"iscalling\");\n  // Incall\n  if (bol === \"true\") {\n    if (session) {\n      ua.terminateSessions(options);\n    }\n    callButton.setAttribute(\"iscalling\", \"false\");\n    showNumpad();\n  }\n  // OutCall\n  else {\n    callButton.setAttribute(\"iscalling\", \"true\");\n    showCallingContainer();\n  }\n}\n\nfunction onAudio(e) {\n  \n  const target = e.target;\n  if (target.getAttribute(\"isactive\") === \"true\") {\n    audio.muted = true;\n    target.style.opacity = \"0.6\";\n    target.setAttribute(\"isactive\", \"false\");\n  } else {\n    audio.muted = false;\n    target.style.opacity = \"1\";\n    target.setAttribute(\"isactive\", \"true\");\n  }\n}\n\nfunction onMute(e) {\n \n  const target = e.target;\n  if (target.getAttribute(\"isactive\") === \"true\") {\n    target.style.opacity = \"0.6\";\n    target.setAttribute(\"isactive\", \"false\");\n    if (session) {\n      session.mute({ audio: true });\n    }\n  } else {\n    target.style.opacity = \"1\";\n    target.setAttribute(\"isactive\", \"true\");\n    if (session) {\n      session.unmute({ audio: true });\n    }\n  }\n}\n\nfunction hideCallingContainer() {\n  const callingContainer = document.getElementById(\"calling-container\");\n  callingContainer.style.animation = \"hide  1.5s forwards\";\n  callingContainer.addEventListener(\"animationend\", () => {\n    callingContainer.style.animation = \"\";\n    callingContainer.style.display = \"none\";\n    callingContainer.style.opacity = \"0\";\n  });\n}\n\nfunction showCallingContainer() {\n  const deleteButton = document.getElementById(\"delete-button\");\n  const callingContainer = document.getElementById(\"calling-container\");\n  callingContainer.style.display = \"flex\";\n  callingContainer.style.animation = \"show  1.5s forwards\";\n  callingContainer.addEventListener(\"animationend\", () => {\n    callingContainer.style.animation = \"\";\n    callingContainer.style.display = \"flex\";\n    callingContainer.style.opacity = \"1\";\n  });\n\n  deleteButton.style.opacity = \"0\";\n  deleteButton.style.pointerEvents = \"none\";\n  hideNumpad();\n\n  const callButton = document.getElementById(\"call-button\");\n  callButton.src = endIcon;\n}\n\nfunction hideNumpad() {\n  const numpad = document.getElementById(\"numpad\");\n  numpad.style.animation = \"hide  1.5s forwards\";\n  numpad.addEventListener(\"animationend\", () => {\n    numpad.style.animation = \"\";\n    numpad.style.display = \"none\";\n    numpad.style.opacity = \"0\";\n  });\n}\n\nfunction showNumpad() {\n  const deleteButton = document.getElementById(\"delete-button\");\n  const numpad = document.getElementById(\"numpad\");\n\n  numpad.style.display = \"flex\";\n  numpad.style.animation = \"show  1.5s forwards\";\n  numpad.addEventListener(\"animationend\", () => {\n    numpad.style.animation = \"\";\n    numpad.style.display = \"flex\";\n    numpad.style.opacity = \"1\";\n  });\n  deleteButton.style.opacity = \"1\";\n  deleteButton.style.pointerEvents = \"auto\";\n  hideCallingContainer();\n\n  const callButton = document.getElementById(\"call-button\");\n  callButton.src = callIcon;\n}\n\nconst getDevice = () => {\n  let device = \"Unknown\";\n  const ua = {\n    \"Generic Linux\": /Linux/i,\n    Android: /Android/i,\n    BlackBerry: /BlackBerry/i,\n    Bluebird: /EF500/i,\n    \"Chrome OS\": /CrOS/i,\n    Datalogic: /DL-AXIS/i,\n    Honeywell: /CT50/i,\n    iPad: /iPad/i,\n    iPhone: /iPhone/i,\n    iPod: /iPod/i,\n    macOS: /Macintosh/i,\n    Windows: /IEMobile|Windows/i,\n    Zebra: /TC70|TC55/i,\n  };\n  Object.keys(ua).map((v) => navigator.userAgent.match(ua[v]) && (device = v));\n  return device.charAt(0).toUpperCase() + device.slice(1);\n};\n\nfunction App() {\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n\n  function call(e) {\n    const target = e.target;\n\n    if (target === e.currentTarget) {\n      target.style.animation = \"fade 0.5s forwards\";\n      target.addEventListener(\"animationend\", () => {\n        target.style.animation = \"\";\n      });\n\n      if (phoneNumber != \"\") {\n        startCallAudio(phoneNumber);\n        setCallButton();\n      }\n    }\n  }\n\n  function click(e) {\n    const target = e.target;\n\n    if (target === e.currentTarget) {\n      target.style.animation = \"fade 0.5s forwards\";\n      target.addEventListener(\"animationend\", () => {\n        target.style.animation = \"\";\n      });\n      setPhoneNumber(\n        phoneNumber + target.attributes.getNamedItem(\"value\").value\n      );\n      \n    }\n  }\n  function deleteNum(e) {\n    setPhoneNumber(phoneNumber.slice(0, -1));\n  }\n  return (\n    <div className=\"App\">\n      <div id=\"phone\">\n        <div id=\"wrapper\">\n          <p id=\"phone-number\" number=\"\">\n            {phoneNumber}\n          </p>\n          <div id=\"function-container\">\n            <div id=\"numpad\">\n              <div className=\"button-container\">\n                <div onClick={click} className=\"key\" value=\"1\">\n                  1<span>&nbsp;</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"2\">\n                  2<span>abc</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"3\">\n                  3<span>def</span>\n                </div>\n              </div>\n\n              <div className=\"button-container\">\n                <div onClick={click} className=\"key\" value=\"4\">\n                  4<span>ghi</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"5\">\n                  5<span>jkl</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"6\">\n                  6<span>mno</span>\n                </div>\n              </div>\n              <div className=\"button-container\">\n                <div onClick={click} className=\"key\" value=\"7\">\n                  7<span>pqrs</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"8\">\n                  8<span>tuv</span>\n                </div>\n                <div onClick={click} className=\"key\" value=\"9\">\n                  9<span>wxyz</span>\n                </div>\n              </div>\n              <div className=\"button-container\">\n                <div\n                  onClick={click}\n                  id=\"special-button-left\"\n                  className=\"key special\"\n                  value=\"*\"\n                >\n                  *\n                </div>\n                <div onClick={click} className=\"key\" value=\"0\">\n                  0<span>+</span>\n                </div>\n                <div\n                  onClick={click}\n                  id=\"special-button-right\"\n                  className=\"key special\"\n                  value=\"#\"\n                >\n                  #\n                </div>\n              </div>\n            </div>\n            <div id=\"calling-container\">\n              <p id=\"status-text\" style={{ fontWeight: \"bold\" }}>\n                Ringing\n              </p>\n              \n              <p\n                id=\"device-text\"\n                style={{\n                  margin: \"3px\",\n                }}\n              >\n                {getDevice()}\n              </p>\n              <p\n                id=\"ip-text\"\n                style={{\n                  margin: \"3px\",\n                }}\n              >\n                {internetProtocol}\n              </p>\n              <p\n                id=\"location-text\"\n                style={{\n                  margin: \"3px\",\n                }}\n              >\n                {address}\n              </p>\n              <div className=\"button-container\">\n                <img\n                  id=\"mute-button\"\n                  onClick={onMute}\n                  isactive=\"true\"\n                  src={muteIcon}\n                  alt=\"\"\n                />\n                <img\n                  id=\"audio-button\"\n                  onClick={onAudio}\n                  isactive=\"true\"\n                  src={audioIcon}\n                  alt=\"\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"button-container\">\n            <div style={{ width: \"75px\", height: \"75px\" }}></div>\n            <img\n              id=\"call-button\"\n              iscalling=\"false\"\n              onClick={call}\n              style={{\n                width: \"65px\",\n                height: \"65px\",\n                margin: \"10px\",\n                padding: 0,\n              }}\n              src={callIcon}\n              alt=\"\"\n            />\n            <img\n              id=\"delete-button\"\n              onClick={deleteNum}\n              style={{ width: \"25px\", margin: \"13px\", paddingLeft: \"20px\" }}\n              src={deleteIcon}\n              alt=\"\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/tuphan/Desktop/ubuntuGcalls/client/src/index.js",[],["35","36"],"/Users/tuphan/Desktop/ubuntuGcalls/client/src/reportWebVitals.js",[],"/Users/tuphan/Desktop/ubuntuGcalls/client/src/App.js",["37","38"],{"ruleId":"39","replacedBy":"40"},{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","severity":1,"message":"44","line":7,"column":27,"nodeType":"45","messageId":"46","endLine":7,"endColumn":36},{"ruleId":"43","severity":1,"message":"47","line":7,"column":38,"nodeType":"45","messageId":"46","endLine":7,"endColumn":47},{"ruleId":"48","severity":1,"message":"49","line":300,"column":23,"nodeType":"50","messageId":"51","endLine":300,"endColumn":25},{"ruleId":"39","replacedBy":"52"},{"ruleId":"41","replacedBy":"53"},{"ruleId":"43","severity":1,"message":"44","line":7,"column":27,"nodeType":"45","messageId":"46","endLine":7,"endColumn":36},{"ruleId":"43","severity":1,"message":"47","line":7,"column":38,"nodeType":"45","messageId":"46","endLine":7,"endColumn":47},"no-native-reassign",["54"],"no-negated-in-lhs",["55"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'Component' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected",["54"],["55"],"no-global-assign","no-unsafe-negation"]