{"ast":null,"code":"\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar Utils = require('./Utils');\n\nvar JsSIP_C = require('./Constants');\n\nvar Grammar = require('./Grammar');\n\nvar URI = require('./URI');\n\nvar Socket = require('./Socket');\n\nvar Exceptions = require('./Exceptions'); // Default settings.\n\n\nexports.settings = {\n  // SIP authentication.\n  authorization_user: null,\n  password: null,\n  realm: null,\n  ha1: null,\n  authorization_jwt: null,\n  // SIP account.\n  display_name: null,\n  uri: null,\n  contact_uri: null,\n  // SIP instance id (GRUU).\n  instance_id: null,\n  // Preloaded SIP Route header field.\n  use_preloaded_route: false,\n  // Session parameters.\n  session_timers: true,\n  session_timers_refresh_method: JsSIP_C.UPDATE,\n  session_timers_force_refresher: false,\n  no_answer_timeout: 60,\n  // Registration parameters.\n  register: true,\n  register_expires: 600,\n  registrar_server: null,\n  // Connection options.\n  sockets: null,\n  connection_recovery_max_interval: JsSIP_C.CONNECTION_RECOVERY_MAX_INTERVAL,\n  connection_recovery_min_interval: JsSIP_C.CONNECTION_RECOVERY_MIN_INTERVAL,\n\n  /*\n   * Host address.\n   * Value to be set in Via sent_by and host part of Contact FQDN.\n  */\n  via_host: \"\".concat(Utils.createRandomToken(12), \".invalid\")\n}; // Configuration checks.\n\nvar checks = {\n  mandatory: {\n    sockets: function sockets(_sockets2) {\n      /* Allow defining sockets parameter as:\n       *  Socket: socket\n       *  Array of Socket: [socket1, socket2]\n       *  Array of Objects: [{socket: socket1, weight:1}, {socket: Socket2, weight:0}]\n       *  Array of Objects and Socket: [{socket: socket1}, socket2]\n       */\n      var _sockets = [];\n\n      if (Socket.isSocket(_sockets2)) {\n        _sockets.push({\n          socket: _sockets2\n        });\n      } else if (Array.isArray(_sockets2) && _sockets2.length) {\n        var _iterator = _createForOfIteratorHelper(_sockets2),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var socket = _step.value;\n\n            if (Object.prototype.hasOwnProperty.call(socket, 'socket') && Socket.isSocket(socket.socket)) {\n              _sockets.push(socket);\n            } else if (Socket.isSocket(socket)) {\n              _sockets.push({\n                socket: socket\n              });\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        return;\n      }\n\n      return _sockets;\n    },\n    uri: function uri(_uri) {\n      if (!/^sip:/i.test(_uri)) {\n        _uri = \"\".concat(JsSIP_C.SIP, \":\").concat(_uri);\n      }\n\n      var parsed = URI.parse(_uri);\n\n      if (!parsed) {\n        return;\n      } else if (!parsed.user) {\n        return;\n      } else {\n        return parsed;\n      }\n    }\n  },\n  optional: {\n    authorization_user: function authorization_user(_authorization_user) {\n      if (Grammar.parse(\"\\\"\".concat(_authorization_user, \"\\\"\"), 'quoted_string') === -1) {\n        return;\n      } else {\n        return _authorization_user;\n      }\n    },\n    authorization_jwt: function authorization_jwt(_authorization_jwt) {\n      if (typeof _authorization_jwt === 'string') {\n        return _authorization_jwt;\n      }\n    },\n    user_agent: function user_agent(_user_agent) {\n      if (typeof _user_agent === 'string') {\n        return _user_agent;\n      }\n    },\n    connection_recovery_max_interval: function connection_recovery_max_interval(_connection_recovery_max_interval) {\n      if (Utils.isDecimal(_connection_recovery_max_interval)) {\n        var value = Number(_connection_recovery_max_interval);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    connection_recovery_min_interval: function connection_recovery_min_interval(_connection_recovery_min_interval) {\n      if (Utils.isDecimal(_connection_recovery_min_interval)) {\n        var value = Number(_connection_recovery_min_interval);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    contact_uri: function contact_uri(_contact_uri) {\n      if (typeof _contact_uri === 'string') {\n        var uri = Grammar.parse(_contact_uri, 'SIP_URI');\n\n        if (uri !== -1) {\n          return uri;\n        }\n      }\n    },\n    display_name: function display_name(_display_name) {\n      return _display_name;\n    },\n    instance_id: function instance_id(_instance_id) {\n      if (/^uuid:/i.test(_instance_id)) {\n        _instance_id = _instance_id.substr(5);\n      }\n\n      if (Grammar.parse(_instance_id, 'uuid') === -1) {\n        return;\n      } else {\n        return _instance_id;\n      }\n    },\n    no_answer_timeout: function no_answer_timeout(_no_answer_timeout) {\n      if (Utils.isDecimal(_no_answer_timeout)) {\n        var value = Number(_no_answer_timeout);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    session_timers: function session_timers(_session_timers) {\n      if (typeof _session_timers === 'boolean') {\n        return _session_timers;\n      }\n    },\n    session_timers_refresh_method: function session_timers_refresh_method(method) {\n      if (typeof method === 'string') {\n        method = method.toUpperCase();\n\n        if (method === JsSIP_C.INVITE || method === JsSIP_C.UPDATE) {\n          return method;\n        }\n      }\n    },\n    session_timers_force_refresher: function session_timers_force_refresher(_session_timers_force_refresher) {\n      if (typeof _session_timers_force_refresher === 'boolean') {\n        return _session_timers_force_refresher;\n      }\n    },\n    password: function password(_password) {\n      return String(_password);\n    },\n    realm: function realm(_realm) {\n      return String(_realm);\n    },\n    ha1: function ha1(_ha) {\n      return String(_ha);\n    },\n    register: function register(_register) {\n      if (typeof _register === 'boolean') {\n        return _register;\n      }\n    },\n    register_expires: function register_expires(_register_expires) {\n      if (Utils.isDecimal(_register_expires)) {\n        var value = Number(_register_expires);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    registrar_server: function registrar_server(_registrar_server) {\n      if (!/^sip:/i.test(_registrar_server)) {\n        _registrar_server = \"\".concat(JsSIP_C.SIP, \":\").concat(_registrar_server);\n      }\n\n      var parsed = URI.parse(_registrar_server);\n\n      if (!parsed) {\n        return;\n      } else if (parsed.user) {\n        return;\n      } else {\n        return parsed;\n      }\n    },\n    use_preloaded_route: function use_preloaded_route(_use_preloaded_route) {\n      if (typeof _use_preloaded_route === 'boolean') {\n        return _use_preloaded_route;\n      }\n    }\n  }\n};\n\nexports.load = function (dst, src) {\n  // Check Mandatory parameters.\n  for (var parameter in checks.mandatory) {\n    if (!src.hasOwnProperty(parameter)) {\n      throw new Exceptions.ConfigurationError(parameter);\n    } else {\n      var value = src[parameter];\n      var checked_value = checks.mandatory[parameter](value);\n\n      if (checked_value !== undefined) {\n        dst[parameter] = checked_value;\n      } else {\n        throw new Exceptions.ConfigurationError(parameter, value);\n      }\n    }\n  } // Check Optional parameters.\n\n\n  for (var _parameter in checks.optional) {\n    if (src.hasOwnProperty(_parameter)) {\n      var _value = src[_parameter];\n      /* If the parameter value is null, empty string, undefined, empty array\n       * or it's a number with NaN value, then apply its default value.\n       */\n\n      if (Utils.isEmpty(_value)) {\n        continue;\n      }\n\n      var _checked_value = checks.optional[_parameter](_value);\n\n      if (_checked_value !== undefined) {\n        dst[_parameter] = _checked_value;\n      } else {\n        throw new Exceptions.ConfigurationError(_parameter, _value);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/tuphan/Desktop/gcallstest/node_modules/jssip/lib-es5/Config.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","from","test","arr","len","arr2","Utils","require","JsSIP_C","Grammar","URI","Socket","Exceptions","exports","settings","authorization_user","password","realm","ha1","authorization_jwt","display_name","uri","contact_uri","instance_id","use_preloaded_route","session_timers","session_timers_refresh_method","UPDATE","session_timers_force_refresher","no_answer_timeout","register","register_expires","registrar_server","sockets","connection_recovery_max_interval","CONNECTION_RECOVERY_MAX_INTERVAL","connection_recovery_min_interval","CONNECTION_RECOVERY_MIN_INTERVAL","via_host","concat","createRandomToken","checks","mandatory","_sockets2","_sockets","isSocket","push","socket","_iterator","_step","hasOwnProperty","_uri","SIP","parsed","parse","user","optional","_authorization_user","_authorization_jwt","user_agent","_user_agent","_connection_recovery_max_interval","isDecimal","Number","_connection_recovery_min_interval","_contact_uri","_display_name","_instance_id","substr","_no_answer_timeout","_session_timers","method","toUpperCase","INVITE","_session_timers_force_refresher","_password","String","_realm","_ha","_register","_register_expires","_registrar_server","_use_preloaded_route","load","dst","src","parameter","ConfigurationError","checked_value","undefined","_parameter","_value","isEmpty","_checked_value"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar Utils = require('./Utils');\n\nvar JsSIP_C = require('./Constants');\n\nvar Grammar = require('./Grammar');\n\nvar URI = require('./URI');\n\nvar Socket = require('./Socket');\n\nvar Exceptions = require('./Exceptions'); // Default settings.\n\n\nexports.settings = {\n  // SIP authentication.\n  authorization_user: null,\n  password: null,\n  realm: null,\n  ha1: null,\n  authorization_jwt: null,\n  // SIP account.\n  display_name: null,\n  uri: null,\n  contact_uri: null,\n  // SIP instance id (GRUU).\n  instance_id: null,\n  // Preloaded SIP Route header field.\n  use_preloaded_route: false,\n  // Session parameters.\n  session_timers: true,\n  session_timers_refresh_method: JsSIP_C.UPDATE,\n  session_timers_force_refresher: false,\n  no_answer_timeout: 60,\n  // Registration parameters.\n  register: true,\n  register_expires: 600,\n  registrar_server: null,\n  // Connection options.\n  sockets: null,\n  connection_recovery_max_interval: JsSIP_C.CONNECTION_RECOVERY_MAX_INTERVAL,\n  connection_recovery_min_interval: JsSIP_C.CONNECTION_RECOVERY_MIN_INTERVAL,\n\n  /*\n   * Host address.\n   * Value to be set in Via sent_by and host part of Contact FQDN.\n  */\n  via_host: \"\".concat(Utils.createRandomToken(12), \".invalid\")\n}; // Configuration checks.\n\nvar checks = {\n  mandatory: {\n    sockets: function sockets(_sockets2) {\n      /* Allow defining sockets parameter as:\n       *  Socket: socket\n       *  Array of Socket: [socket1, socket2]\n       *  Array of Objects: [{socket: socket1, weight:1}, {socket: Socket2, weight:0}]\n       *  Array of Objects and Socket: [{socket: socket1}, socket2]\n       */\n      var _sockets = [];\n\n      if (Socket.isSocket(_sockets2)) {\n        _sockets.push({\n          socket: _sockets2\n        });\n      } else if (Array.isArray(_sockets2) && _sockets2.length) {\n        var _iterator = _createForOfIteratorHelper(_sockets2),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var socket = _step.value;\n\n            if (Object.prototype.hasOwnProperty.call(socket, 'socket') && Socket.isSocket(socket.socket)) {\n              _sockets.push(socket);\n            } else if (Socket.isSocket(socket)) {\n              _sockets.push({\n                socket: socket\n              });\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        return;\n      }\n\n      return _sockets;\n    },\n    uri: function uri(_uri) {\n      if (!/^sip:/i.test(_uri)) {\n        _uri = \"\".concat(JsSIP_C.SIP, \":\").concat(_uri);\n      }\n\n      var parsed = URI.parse(_uri);\n\n      if (!parsed) {\n        return;\n      } else if (!parsed.user) {\n        return;\n      } else {\n        return parsed;\n      }\n    }\n  },\n  optional: {\n    authorization_user: function authorization_user(_authorization_user) {\n      if (Grammar.parse(\"\\\"\".concat(_authorization_user, \"\\\"\"), 'quoted_string') === -1) {\n        return;\n      } else {\n        return _authorization_user;\n      }\n    },\n    authorization_jwt: function authorization_jwt(_authorization_jwt) {\n      if (typeof _authorization_jwt === 'string') {\n        return _authorization_jwt;\n      }\n    },\n    user_agent: function user_agent(_user_agent) {\n      if (typeof _user_agent === 'string') {\n        return _user_agent;\n      }\n    },\n    connection_recovery_max_interval: function connection_recovery_max_interval(_connection_recovery_max_interval) {\n      if (Utils.isDecimal(_connection_recovery_max_interval)) {\n        var value = Number(_connection_recovery_max_interval);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    connection_recovery_min_interval: function connection_recovery_min_interval(_connection_recovery_min_interval) {\n      if (Utils.isDecimal(_connection_recovery_min_interval)) {\n        var value = Number(_connection_recovery_min_interval);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    contact_uri: function contact_uri(_contact_uri) {\n      if (typeof _contact_uri === 'string') {\n        var uri = Grammar.parse(_contact_uri, 'SIP_URI');\n\n        if (uri !== -1) {\n          return uri;\n        }\n      }\n    },\n    display_name: function display_name(_display_name) {\n      return _display_name;\n    },\n    instance_id: function instance_id(_instance_id) {\n      if (/^uuid:/i.test(_instance_id)) {\n        _instance_id = _instance_id.substr(5);\n      }\n\n      if (Grammar.parse(_instance_id, 'uuid') === -1) {\n        return;\n      } else {\n        return _instance_id;\n      }\n    },\n    no_answer_timeout: function no_answer_timeout(_no_answer_timeout) {\n      if (Utils.isDecimal(_no_answer_timeout)) {\n        var value = Number(_no_answer_timeout);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    session_timers: function session_timers(_session_timers) {\n      if (typeof _session_timers === 'boolean') {\n        return _session_timers;\n      }\n    },\n    session_timers_refresh_method: function session_timers_refresh_method(method) {\n      if (typeof method === 'string') {\n        method = method.toUpperCase();\n\n        if (method === JsSIP_C.INVITE || method === JsSIP_C.UPDATE) {\n          return method;\n        }\n      }\n    },\n    session_timers_force_refresher: function session_timers_force_refresher(_session_timers_force_refresher) {\n      if (typeof _session_timers_force_refresher === 'boolean') {\n        return _session_timers_force_refresher;\n      }\n    },\n    password: function password(_password) {\n      return String(_password);\n    },\n    realm: function realm(_realm) {\n      return String(_realm);\n    },\n    ha1: function ha1(_ha) {\n      return String(_ha);\n    },\n    register: function register(_register) {\n      if (typeof _register === 'boolean') {\n        return _register;\n      }\n    },\n    register_expires: function register_expires(_register_expires) {\n      if (Utils.isDecimal(_register_expires)) {\n        var value = Number(_register_expires);\n\n        if (value > 0) {\n          return value;\n        }\n      }\n    },\n    registrar_server: function registrar_server(_registrar_server) {\n      if (!/^sip:/i.test(_registrar_server)) {\n        _registrar_server = \"\".concat(JsSIP_C.SIP, \":\").concat(_registrar_server);\n      }\n\n      var parsed = URI.parse(_registrar_server);\n\n      if (!parsed) {\n        return;\n      } else if (parsed.user) {\n        return;\n      } else {\n        return parsed;\n      }\n    },\n    use_preloaded_route: function use_preloaded_route(_use_preloaded_route) {\n      if (typeof _use_preloaded_route === 'boolean') {\n        return _use_preloaded_route;\n      }\n    }\n  }\n};\n\nexports.load = function (dst, src) {\n  // Check Mandatory parameters.\n  for (var parameter in checks.mandatory) {\n    if (!src.hasOwnProperty(parameter)) {\n      throw new Exceptions.ConfigurationError(parameter);\n    } else {\n      var value = src[parameter];\n      var checked_value = checks.mandatory[parameter](value);\n\n      if (checked_value !== undefined) {\n        dst[parameter] = checked_value;\n      } else {\n        throw new Exceptions.ConfigurationError(parameter, value);\n      }\n    }\n  } // Check Optional parameters.\n\n\n  for (var _parameter in checks.optional) {\n    if (src.hasOwnProperty(_parameter)) {\n      var _value = src[_parameter];\n      /* If the parameter value is null, empty string, undefined, empty array\n       * or it's a number with NaN value, then apply its default value.\n       */\n\n      if (Utils.isEmpty(_value)) {\n        continue;\n      }\n\n      var _checked_value = checks.optional[_parameter](_value);\n\n      if (_checked_value !== undefined) {\n        dst[_parameter] = _checked_value;\n      } else {\n        throw new Exceptions.ConfigurationError(_parameter, _value);\n      }\n    }\n  }\n};"]},"metadata":{},"sourceType":"script"}